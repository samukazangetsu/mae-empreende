<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/cadastro.css">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/css/style.css">
    <title>Cadastro</title>
</head>

<body>
    <nav class="navbar text-start">
        <div id="menu" class="ms-5 me-5 p-2 container-fluid">
            <h1 class="text-start nav-item"><a id="logo" href="/" class="navbar-brand">MÃ£e Empreende</a></h1>
            <form id="search" class="nav-item">
                <input class="form-control me-2 container" type="search" placeholder="Buscar produtos"
                    aria-label="Search">
            </form>
            <div id="icones" class="nav-item container">
                <a href="/usuario">
                    <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 35 35" fill="none">
                        <path
                            d="M29.1667 30.625V27.7083C29.1667 26.1612 28.5521 24.6775 27.4582 23.5835C26.3642 22.4896 24.8805 21.875 23.3334 21.875H11.6667C10.1196 21.875 8.63588 22.4896 7.54192 23.5835C6.44796 24.6775 5.83337 26.1612 5.83337 27.7083V30.625"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path
                            d="M17.5 16.0417C20.7216 16.0417 23.3333 13.43 23.3333 10.2083C23.3333 6.98667 20.7216 4.375 17.5 4.375C14.2783 4.375 11.6666 6.98667 11.6666 10.2083C11.6666 13.43 14.2783 16.0417 17.5 16.0417Z"
                            stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </a>
            </div>

        </div>
    </nav>

    <div class="container mt-5">
        <h2>PRODUTOS CADASTRADOS</h2>
        
        <div class="row" id="linha">
           
        </div>

    </div>
    <footer>
        <script>
            function criarCard(produto) {
                console.log("aqui");
                var card = document.createElement("div");
                card.className = "col";
                var card2 = document.createElement("div");
                card2.className = "card mb-4";
                card.appendChild(card2);
                var img = document.createElement("img");
                img.className = "img produto-imagem";
                img.src = produto["imagem"];
                img.style.backgroundSize = "contain";
                card2.appendChild(img);
                var cardBody = document.createElement("div");
                cardBody.className = "car-body text-center";
                var desc = document.createElement("h5");
                desc.className = "card-title";
                desc.style.color = "black";
                desc.textContent = produto["nome"];
                var price = document.createElement("p");
                price.className = "card-text d-flex justify-content-center";
                price.textContent = 'R$ ' + produto["preco"];
                price.style.color = "#84B6F4";
                card2.appendChild(cardBody);
                cardBody.appendChild(desc);
                cardBody.appendChild(price);
                var row = document.getElementById("linha");
                row.appendChild(card);
            }
            const buscarData = function () {
                var xmlhttp = new XMLHttpRequest();
                xmlhttp.open('GET', '/listar_produtos_usuario', true);
                xmlhttp.responseType = 'json';
                xmlhttp.onload = function () {
                    var status = xmlhttp.status;
                    if (status === 200) {
                        console.log(xmlhttp.response);
                        xmlhttp.response.forEach(element => {
                            criarCard(element);
                        });
                    } else {
                        console.log(status, xmlhttp.response);
                    }
                }
                xmlhttp.send();
            }
            buscarData();
        </script>
    </footer>
</body>

</html>